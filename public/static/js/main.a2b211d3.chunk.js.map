{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","components/Menu.tsx","types/index.tsx","store.tsx","context/index.tsx","services/device.tsx","services/api.tsx","components/Post.tsx","pages/Posts.tsx","pages/User.tsx","pages/NewPost.tsx","pages/Weact.tsx","services/location.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","appPages","title","url","iosIcon","mailOutline","mdIcon","mailSharp","paperPlaneOutline","paperPlaneSharp","heartOutline","heartSharp","archiveOutline","archiveSharp","trashOutline","trashSharp","warningOutline","warningSharp","labels","Menu","location","useLocation","contentId","type","appPage","index","key","autoHide","className","pathname","routerLink","routerDirection","lines","detail","slot","ios","md","label","icon","bookmarkOutline","defaultLocation","latitude","longitude","timestamp","Date","now","initialState","user","posts","reducer","state","action","post","filter","LocationContext","createContext","DataContext","dispatch","getDeviceId","a","UniqueDeviceID","get","storageId","localStorage","getItem","uuid","uuidv4","setItem","login","device_id","fetch","method","credentials","body","JSON","stringify","headers","response","json","console","log","reject","createPost","ok","updatePost","Post","ref","useRef","handleDelete","current","close","toggleActive","is_active","updatedPost","text","emotion_id","side","color","onClick","Posts","useContext","addCircleOutline","fullscreen","collapse","size","User","name","NewPost","useHistory","push","goBack","initialPost","useState","setPost","handleSubmit","event","preventDefault","_post","defaultHref","onSubmit","value","inputMode","placeholder","autoGrow","required","rows","onIonChange","expand","fill","Page","setPosts","currentPost","setCurrentPost","error","setError","content","cardElem","x","useMotionValue","controls","useAnimation","_setPosts","_posts","length","getPosts","fetchedPosts","useEffect","getBoundingClientRect","unsubscribeX","onChange","handleWeaction","direction","params","post_id","weaction","handleDragEnd","info","offsetX","offset","velocityX","velocity","offsetY","y","velocityY","transition","start","duration","opacity","scrollY","motion","div","drag","dragConstraints","top","left","right","bottom","dragElastic","whileTap","scale","style","onDragEnd","animate","arrowDownCircleOutline","arrowBackCircleOutline","arrowForwardCircleOutline","arrowUpCircleOutline","emptyPosition","coords","getCurrentPosition","Geolocation","position","message","App","useReducer","userLocation","setUserLocation","getData","status","catch","err","sessionData","getUserLocation","Provider","path","component","exact","Weact","from","to","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"uHAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.a2b211d3.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t143,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t144,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t145,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t146,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t147,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t148,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t149,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t150,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t151,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t152,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t153,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t154,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t155,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t156,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t157,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t158,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t159,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t160,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t161,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t162,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t163,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t164,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t165,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t166,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t167,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t168,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t169,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t170,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t171,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t172,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t173,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t174,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t175,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t176,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t177,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t178,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t179,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t180,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t181,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t182,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t183,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t184,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t185,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 119;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t187,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 121;\nmodule.exports = webpackAsyncContext;","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonListHeader,\n  IonMenu,\n  IonMenuToggle,\n  IonNote,\n} from '@ionic/react';\n\nimport React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { archiveOutline, archiveSharp, bookmarkOutline, heartOutline, heartSharp, mailOutline, mailSharp, paperPlaneOutline, paperPlaneSharp, trashOutline, trashSharp, warningOutline, warningSharp } from 'ionicons/icons';\nimport './Menu.css';\n\ninterface AppPage {\n  url: string;\n  iosIcon: string;\n  mdIcon: string;\n  title: string;\n}\n\nconst appPages: AppPage[] = [\n  {\n    title: 'User',\n    url: '/user',\n    iosIcon: mailOutline,\n    mdIcon: mailSharp\n  },\n  {\n    title: 'Outbox',\n    url: '/page/Outbox',\n    iosIcon: paperPlaneOutline,\n    mdIcon: paperPlaneSharp\n  },\n  {\n    title: 'Posts',\n    url: '/posts',\n    iosIcon: heartOutline,\n    mdIcon: heartSharp\n  },\n  {\n    title: 'Weact',\n    url: '/weact',\n    iosIcon: archiveOutline,\n    mdIcon: archiveSharp\n  },\n  {\n    title: 'Trash',\n    url: '/page/Trash',\n    iosIcon: trashOutline,\n    mdIcon: trashSharp\n  },\n  {\n    title: 'Spam',\n    url: '/page/Spam',\n    iosIcon: warningOutline,\n    mdIcon: warningSharp\n  }\n];\n\nconst labels = ['Family', 'Friends', 'Notes', 'Work', 'Travel', 'Reminders'];\n\nconst Menu: React.FC = () => {\n  const location = useLocation();\n\n  return (\n    <IonMenu contentId=\"main\" type=\"overlay\">\n      <IonContent>\n        <IonList id=\"inbox-list\">\n          <IonListHeader>WeFresh</IonListHeader>\n          <IonNote>Hello</IonNote>\n          {appPages.map((appPage, index) => {\n            return (\n              <IonMenuToggle key={index} autoHide={false}>\n                <IonItem className={location.pathname === appPage.url ? 'selected' : ''} routerLink={appPage.url} routerDirection=\"none\" lines=\"none\" detail={false}>\n                  <IonIcon slot=\"start\" ios={appPage.iosIcon} md={appPage.mdIcon} />\n                  <IonLabel>{appPage.title}</IonLabel>\n                </IonItem>\n              </IonMenuToggle>\n            );\n          })}\n        </IonList>\n\n        <IonList id=\"labels-list\">\n          <IonListHeader>Labels</IonListHeader>\n          {labels.map((label, index) => (\n            <IonItem lines=\"none\" key={index}>\n              <IonIcon slot=\"start\" icon={bookmarkOutline} />\n              <IonLabel>{label}</IonLabel>\n            </IonItem>\n          ))}\n        </IonList>\n      </IonContent>\n    </IonMenu>\n  );\n};\n\nexport default Menu;\n","export interface ILocation {\n  latitude: number;\n  longitude: number;\n  timestamp: number;\n}\n\nexport const defaultLocation = {\n  latitude: 0,\n  longitude: 0,\n  timestamp: Date.now()\n}\n\nexport interface IUser {\n  user_id: number;\n  name: string;\n  latitude: number;\n  longitude: number;\n}\n\nexport interface IPost {\n  id: number;\n  text: string;\n  emotion_id: number | null;\n  latitude: number;\n  longitude: number;\n  is_active: boolean;\n}\n\nexport interface IPostParams {\n  text: string\n  emotion_id: number | null\n  latitude?: number;\n  longitude?: number;\n}\n\nexport type Direction = 'up' | 'down' | 'left' | 'right'\n\nexport interface IWeactionParams {\n  post_id: number;\n  direction: Direction;\n  latitude: number;\n  longitude: number;\n}\n\nexport interface IStore {\n  user: IUser | null;\n  posts: IPost[];\n}\n","import { IStore, IPost, IUser } from './types'\n\ntype Action =\n  | { type: 'ADD_POST'; post: IPost }\n  | { type: 'UPDATE_POST'; post: IPost }\n  | { type: 'DELETE_POST'; id: number }\n  | { type: 'SET_DATA'; user: IUser, posts: IPost[] }\n\nexport const initialState = { user: null, posts: [] }\n\nexport const reducer = (state: IStore, action: Action) => {\n  switch (action.type) {\n    case 'SET_DATA':\n      return { ...state, user: action.user, posts: action.posts }\n    case 'ADD_POST':\n      return { ...state, posts: [ ...state.posts, action.post ] }\n    case 'UPDATE_POST':\n      return { ...state, posts: state.posts.map(post => {\n        if (post.id === action.post.id) {\n          return action.post\n        }\n        return post\n      })\n    }\n    case 'DELETE_POST':\n      return { ...state, posts: state.posts.filter(post => post.id !== action.id) }\n    default:\n      throw new Error()\n  }\n}\n","import { createContext } from 'react'\nimport { ILocation, IStore, defaultLocation } from '../types'\nimport { initialState } from '../store'\n\nexport const LocationContext = createContext<ILocation>(defaultLocation)\n\nexport const DataContext = createContext<{\n  state: IStore;\n  dispatch: React.Dispatch<any>\n}>({ \n  state: initialState,\n  dispatch: () => null\n})","import { UniqueDeviceID } from '@ionic-native/unique-device-id'\nimport { v4 as uuidv4 } from 'uuid';\n\nexport const getDeviceId = async () => {\n  try {\n    return await UniqueDeviceID.get()\n  } catch(err) {\n    if (err === \"cordova_not_available\") {\n      const storageId = localStorage.getItem('weef-id');\n      if (storageId) {\n        return storageId;\n      }\n      const uuid = `ls-${uuidv4()}`;\n      localStorage.setItem('weef-id', uuid);\n      return uuid;\n    }\n    throw err\n  }\n}","\nimport { IPost, IPostParams, IWeactionParams } from '../types'\nimport { getDeviceId } from '../services/device'\n\n\nexport const login = async () => {\n  try {\n    const device_id = await getDeviceId()\n    const response = await fetch('/api/sessions', {\n      method: 'POST',\n      credentials: 'include',\n      body: JSON.stringify({ device_id }),\n      headers: {\n        'Content-Type': 'application/json',\n      }\n    })\n    const json = await response.json()\n    return json\n  } catch(err) {\n    console.log(err)\n    return Promise.reject(err)\n  }\n}\n\nexport const getSession = () => {\n  return fetch('/api/sessions', {\n    method: 'GET',\n    credentials: 'include',\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      console.log(response)\n      if (response.status === 401) {\n        return login()\n      } else {\n        throw response\n      }\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\nexport const createPost = (post: IPostParams) => {\n  return fetch('/api/posts', {\n    method: 'POST',\n    credentials: 'include',\n    body: JSON.stringify({\n      ...post\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      throw response\n    }\n  })\n}\n\nexport const deletePost = (post: IPost) => {\n  return fetch('/api/posts/${post.id}', {\n    method: 'DELETE',\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      throw response\n    }\n  })\n}\n\nexport const updatePost = (post: IPost) => {\n  return fetch('/api/posts/${post.id}', {\n    method: 'PATCH',\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      ...post\n    }),\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      throw response\n    }\n  })\n}\n\nexport const getPosts = () => {\n  return fetch('/api/posts', {\n    method: 'GET',\n    credentials: 'include',\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      throw response\n    }\n  })\n}\n\nexport const createWeaction = (weaction: IWeactionParams) => {\n  return fetch('/api/weactions', {\n    method: 'POST',\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      ...weaction\n    }),\n  }).then(response => {\n    if (response.ok) {\n      return response.json()\n    } else {\n      throw response\n    }\n  })\n}","import React, { useRef } from 'react'\nimport {\n  IonItem,\n  IonLabel,\n  IonItemSliding,\n  IonItemOptions,\n  IonItemOption\n} from '@ionic/react'\nimport { deletePost, updatePost } from '../services/api'\nimport { IPost } from '../types'\n\ninterface PostProps {\n  post: IPost,\n  dispatch: React.Dispatch<any>\n}\n\nconst Post: React.FC<PostProps> = ({ post, dispatch }) => {\n\n  const ref = useRef<HTMLIonItemSlidingElement | null>(null)\n\n  const handleDelete = async () => {\n    try {\n      await deletePost(post)\n      dispatch({ type: 'DELETE_POST', id: post.id })\n    } catch(err) {\n      console.log(err)\n    } finally {\n      ref.current?.close()\n    }\n  }\n\n  const toggleActive = async () => {\n    try {\n      const updatedPost = await updatePost({ ...post, is_active: !post.is_active })\n      dispatch({ type: 'UPDATE_POST', post: updatedPost })\n    } catch(err) {\n      console.log(err)\n    } finally {\n      ref.current?.close()\n    }\n  }\n\n  return (\n    <IonItemSliding ref={ref}>\n      <IonItem>\n        <IonLabel>{post.text}</IonLabel>\n        <p>{post.emotion_id}</p>\n        <p>{post.is_active ? 'active' : 'not active'}</p>\n      </IonItem>\n\n      <IonItemOptions side=\"end\">\n        <IonItemOption\n          color=\"secondary\"\n          onClick={toggleActive}\n        >\n          Disable\n        </IonItemOption>\n        <IonItemOption\n          onClick={handleDelete}\n          color=\"danger\"\n        >\n          Delete\n        </IonItemOption>\n      </IonItemOptions>\n    </IonItemSliding>\n  );\n};\n\nexport default Post;","import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonList,\n  IonButton,\n  IonIcon\n} from \"@ionic/react\"\nimport React, { useContext } from \"react\"\nimport { addCircleOutline } from 'ionicons/icons'\nimport \"./Page.css\"\nimport { DataContext } from '../context'\nimport Post from '../components/Post'\n\nconst Posts: React.FC = () => {\n  const { state, dispatch } = useContext(DataContext);\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>Posts</IonTitle>\n          <IonButtons slot=\"primary\">\n            <IonButton color=\"secondary\" routerLink=\"/posts/new\" >\n              <IonIcon\n                slot=\"icon-only\"\n                icon={addCircleOutline}\n              />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Posts</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonList lines=\"full\">\n          {state.posts.map((post) => (\n            <Post post={post} key={post.id} dispatch={dispatch} />\n          ))}\n        </IonList>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Posts;\n","import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonCard,\n  IonCardContent\n} from \"@ionic/react\"\nimport React, { useContext } from \"react\"\nimport \"./Page.css\"\nimport { DataContext } from '../context'\n\nconst User: React.FC = () => {\n  const { state } = useContext(DataContext);\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>User</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">User</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonCard>\n          <IonCardContent>\n            <p>User id: {state?.user?.name}</p>\n          </IonCardContent>\n        </IonCard>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default User;\n","import {\n  IonButtons,\n  IonButton,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonBackButton,\n  IonItem,\n  IonTextarea,\n  IonLabel,\n  IonList,\n  IonListHeader,\n  IonRadio,\n  IonRadioGroup\n} from \"@ionic/react\"\nimport { useHistory } from 'react-router'\nimport React, { useState, useContext } from \"react\"\nimport { DataContext, LocationContext } from '../context'\nimport { createPost } from '../services/api'\nimport { IPostParams} from '../types'\nimport \"./Page.css\"\n\nconst NewPost: React.FC = () => {\n  const { action, push, goBack } = useHistory<{ action: string; }>();\n  const location = useContext(LocationContext);\n  const { dispatch } = useContext(DataContext);\n  \n  const initialPost = {\n    text: '',\n    emotion_id: null,\n  };\n\n  const [post, setPost] = useState<IPostParams>(initialPost);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault()\n\n    const _post = await createPost({\n      ...post,\n      latitude: location?.latitude,\n      longitude: location?.longitude\n    })\n\n    dispatch({ type: 'ADD_POST', post: _post })\n\n    setPost(initialPost)\n    if (action === 'PUSH') {\n      goBack()\n    } else {\n      push('/posts')\n    }\n  }\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            { action === 'PUSH' ? (\n              <IonBackButton defaultHref=\"/\" />\n            ) : (\n              <IonMenuButton />\n            )}\n          </IonButtons>\n          <IonTitle>New Post</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">New Post</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        \n        <form onSubmit={handleSubmit} >\n          <IonList lines=\"full\">\n            <IonListHeader>\n              <IonLabel>Text</IonLabel>\n            </IonListHeader>\n            <IonItem>\n              <IonTextarea\n                value={post.text}\n                inputMode=\"text\"\n                placeholder=\"Enter Text\"\n                autoGrow\n                required\n                rows={3}\n                onIonChange={e => setPost({...post, text: e.detail.value || ''})}\n              />\n            </IonItem>\n\n            <IonRadioGroup\n              value={post.emotion_id}\n              onIonChange={e => setPost({...post, emotion_id: e.detail.value})}\n            >\n              <IonListHeader>\n                <IonLabel>Emotion</IonLabel>\n              </IonListHeader>\n\n              <IonItem>\n                <IonLabel>Happy</IonLabel>\n                <IonRadio slot=\"end\" value={1} />\n              </IonItem>\n\n              <IonItem>\n                <IonLabel>Amused</IonLabel>\n                <IonRadio slot=\"end\" value={2} />\n              </IonItem>\n\n              <IonItem>\n                <IonLabel>Angry</IonLabel>\n                <IonRadio slot=\"end\" value={3} />\n              </IonItem>\n\n              <IonItem>\n                <IonLabel>Meh</IonLabel>\n                <IonRadio slot=\"end\" value={4} />\n              </IonItem>\n            </IonRadioGroup>\n\n          </IonList>\n          <IonButton\n            type=\"submit\"\n            expand=\"full\"\n            fill=\"outline\"\n          >\n            Create Post\n          </IonButton>\n        </form>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default NewPost;\n","import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonCard,\n  IonCardContent,\n  IonFooter,\n  IonButton,\n  IonIcon\n} from \"@ionic/react\";\nimport {\n  arrowDownCircleOutline,\n  arrowUpCircleOutline,\n  arrowForwardCircleOutline,\n  arrowBackCircleOutline\n} from 'ionicons/icons';\nimport React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { IPost, Direction } from '../types'\nimport { LocationContext } from '../context'\nimport * as Api from '../services/api'\n\nimport { motion, useMotionValue, useAnimation } from \"framer-motion\";\n\nimport './Weact.css'\n\nconst Page: React.FC = () => {\n  const [posts, setPosts] = useState<IPost[]>([])\n  const [currentPost, setCurrentPost] = useState<IPost | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const location = useContext(LocationContext);\n  const content = useRef<HTMLIonContentElement | null>(null)\n  const cardElem = useRef<HTMLDivElement | null>(null)\n  const x = useMotionValue(0)\n  const controls = useAnimation()\n\n  const _setPosts = (posts: IPost[]) => {\n    const [_post, ..._posts] = posts\n    setCurrentPost(_post)\n    setPosts(_posts)\n    if (!_posts.length) {\n      getPosts().then(posts => setPosts(posts))\n    }\n  }\n\n  const getPosts = async () => {\n    try {\n      setError(null)\n      const fetchedPosts = await Api.getPosts()\n      return fetchedPosts\n    } catch(err) {\n      setError('Something went wrong 😞')\n    }\n  }\n\n  useEffect(() => {\n    if (null !== content.current){\n      console.log(content?.current?.getBoundingClientRect())\n    }\n    getPosts().then(posts => posts && _setPosts(posts))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    const unsubscribeX = x.onChange(() => {\n      const childNode = cardElem.current\n      // console.log(childNode?.getBoundingClientRect(), content?.current?.getBoundingClientRect(), xVelocity)\n    })\n\n    return () => unsubscribeX()\n  })\n\n  const handleWeaction = async (direction: Direction) => {\n    if (currentPost) {\n      const params = {\n        post_id: currentPost.id,\n        direction,\n        latitude: location.latitude,\n        longitude: location.longitude\n      }\n      try {\n        await Api.createWeaction(params)\n        _setPosts(posts)\n      } catch(err) {\n        console.log(error)\n      }\n    }\n  }\n\n  const handleDragEnd = async (event: any, info: { offset: { x: number; y: number; }; velocity: { x: number; y: number; }; }) => {\n    const offsetX = info.offset.x\n    const velocityX = info.velocity.x\n    const offsetY = info.offset.y\n    const velocityY = info.velocity.y\n\n    let direction: Direction | null = null;\n    let transition;\n\n    if (offsetY < -100 || velocityY < -100) {\n      console.log('swipe up')\n      transition = { y: -1000 }\n      direction = 'up'\n    } else if (offsetY > 100 || velocityY > 100) {\n      console.log('swipe down')\n      transition = { y: 1000 }\n      direction = 'down'\n    } else if (offsetX < -100 || velocityX < -100) {\n      console.log('swipe right')\n      transition = { x: -1000 }\n      direction = 'right'\n    } else if (offsetX > 100 || velocityX > 100) {\n      console.log('swipe left')\n      transition = { x: 1000 }\n      direction = 'left'\n    }\n    \n    if (direction) {\n      try {\n        await handleWeaction(direction)\n        await controls.start({\n          ...transition,\n          transition: { duration: 0.5 },\n          opacity: 0,\n        })\n        await controls.start({ opacity: 1, x: 0, y: 0 })\n      } catch (err) {\n        console.log(err)\n      }\n    }\n  }\n  \n  if (error) {\n    return <p>{error}</p>\n  }\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>Weact</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen ref={content} scrollY={false}>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Weact</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <motion.div\n          ref={cardElem}\n          drag\n          dragConstraints={{\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n          }}\n          dragElastic={1}\n          whileTap={{ scale: 1.1 }}\n          style={{ x }}\n          onDragEnd={handleDragEnd}\n          animate={controls}\n          className=\"weact-height\"\n        >\n          <IonCard className=\"full-height\">\n            <IonCardContent>\n              {posts.length &&\n                  <p>{posts[0].text}</p>\n              }\n            </IonCardContent>\n          </IonCard>\n        </motion.div>\n      </IonContent>\n\n      <IonFooter>\n        <IonToolbar>\n        <IonButtons>\n          <IonButton onClick={() => handleWeaction('down')}>\n            <IonIcon slot=\"icon-only\" icon={arrowDownCircleOutline} />\n          </IonButton>\n          <IonButton onClick={() => handleWeaction('left')}>\n            <IonIcon slot=\"icon-only\" icon={arrowBackCircleOutline} />\n          </IonButton>\n          <IonButton onClick={() => handleWeaction('right')}>\n            <IonIcon slot=\"icon-only\" icon={arrowForwardCircleOutline} />\n          </IonButton>\n          <IonButton onClick={() => handleWeaction('up')}>\n            <IonIcon slot=\"icon-only\" icon={arrowUpCircleOutline} />\n          </IonButton>\n        </IonButtons>\n        </IonToolbar>\n      </IonFooter>\n    </IonPage>\n  );\n};\n\nexport default Page;\n","import { Geolocation } from '@ionic-native/geolocation';\n\nexport const emptyPosition = {\n  coords: {\n    latitude: 0,\n    longitude: 0,\n  },\n  timestamp: 0\n}\n\nexport const getCurrentPosition = async () => {\n  try {\n    const position = await Geolocation.getCurrentPosition();\n    return position\n  } catch(err) {\n    if (err?.message === 'User denied Geolocation') {\n      console.log('User denied Geolocation')\n    }\n    return emptyPosition\n  }\n};","import Menu from './components/Menu';\nimport Posts from './pages/Posts';\nimport User from './pages/User';\nimport NewPost from './pages/NewPost';\nimport Weact from './pages/Weact';\nimport React, { useEffect, useState, useReducer } from 'react';\nimport { IonApp, IonRouterOutlet, IonSplitPane } from '@ionic/react';\nimport { IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route } from 'react-router-dom';\n\nimport { getSession, login } from './services/api';\nimport { getCurrentPosition } from './services/location'\nimport { DataContext, LocationContext } from './context';\nimport { reducer, initialState } from './store';\n\nimport { ILocation, defaultLocation } from './types'\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\nconst App: React.FC = () => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  const [userLocation, setUserLocation] = useState<ILocation>(defaultLocation)\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        const sessionData = await getSession()\n        dispatch({ type: 'SET_DATA', ...sessionData })\n      } catch(err) {\n        console.log(err)\n      }\n    }\n\n    const getUserLocation = async () => {\n      const position = await getCurrentPosition();\n      setUserLocation({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        timestamp: position.timestamp\n      })\n    };\n\n    getData()\n    getUserLocation()\n  }, [])\n\n  if (!state.user) {\n    return <div>nope</div>\n  }\n\n  return (\n    <IonApp>\n      <DataContext.Provider value={{ state, dispatch }}>\n        <LocationContext.Provider value={userLocation}>\n          <IonReactHashRouter>\n            <IonSplitPane contentId=\"main\">\n              <Menu />\n              <IonRouterOutlet id=\"main\">\n                <Route path=\"/posts/new\" component={NewPost} exact />\n                <Route path=\"/posts\" component={Posts} exact />\n                <Route path=\"/weact\" component={Weact} exact />\n                <Route path=\"/user\" component={User} exact />\n                <Redirect from=\"/\" to=\"/posts\" exact />\n              </IonRouterOutlet>\n            </IonSplitPane>\n          </IonReactHashRouter>\n        </LocationContext.Provider>\n      </DataContext.Provider>\n    </IonApp>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}