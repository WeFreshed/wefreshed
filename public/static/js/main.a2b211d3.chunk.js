(this.webpackJsonpweef=this.webpackJsonpweef||[]).push([[1],{113:function(e,t,n){e.exports=n(139)},119:function(e,t,n){var r={"./ion-action-sheet.entry.js":[143,5],"./ion-alert.entry.js":[144,6],"./ion-app_8.entry.js":[145,7],"./ion-avatar_3.entry.js":[146,17],"./ion-back-button.entry.js":[147,18],"./ion-backdrop.entry.js":[148,43],"./ion-button_2.entry.js":[149,19],"./ion-card_5.entry.js":[150,20],"./ion-checkbox.entry.js":[151,21],"./ion-chip.entry.js":[152,22],"./ion-col_3.entry.js":[153,44],"./ion-datetime_3.entry.js":[154,10],"./ion-fab_3.entry.js":[155,23],"./ion-img.entry.js":[156,45],"./ion-infinite-scroll_2.entry.js":[157,46],"./ion-input.entry.js":[158,24],"./ion-item-option_3.entry.js":[159,25],"./ion-item_8.entry.js":[160,26],"./ion-loading.entry.js":[161,27],"./ion-menu_3.entry.js":[162,28],"./ion-modal.entry.js":[163,8],"./ion-nav_2.entry.js":[164,14],"./ion-popover.entry.js":[165,9],"./ion-progress-bar.entry.js":[166,29],"./ion-radio_2.entry.js":[167,30],"./ion-range.entry.js":[168,31],"./ion-refresher_2.entry.js":[169,11],"./ion-reorder_2.entry.js":[170,16],"./ion-ripple-effect.entry.js":[171,47],"./ion-route_4.entry.js":[172,32],"./ion-searchbar.entry.js":[173,33],"./ion-segment_2.entry.js":[174,34],"./ion-select_3.entry.js":[175,35],"./ion-slide_2.entry.js":[176,48],"./ion-spinner.entry.js":[177,13],"./ion-split-pane.entry.js":[178,49],"./ion-tab-bar_2.entry.js":[179,36],"./ion-tab_2.entry.js":[180,15],"./ion-text.entry.js":[181,37],"./ion-textarea.entry.js":[182,38],"./ion-toast.entry.js":[183,39],"./ion-toggle.entry.js":[184,12],"./ion-virtual-scroll.entry.js":[185,50]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=119,e.exports=a},121:function(e,t,n){var r={"./ion-icon.entry.js":[187,57]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=121,e.exports=a},122:function(e,t,n){},127:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(70),o=n.n(c),l=n(4),s=n.n(l),i=n(12),u=n(10),p=n(32),m=n(2),d=n(27),f=n(7),E=(n(122),[{title:"User",url:"/user",iosIcon:f.r,mdIcon:f.s},{title:"Outbox",url:"/page/Outbox",iosIcon:f.v,mdIcon:f.w},{title:"Posts",url:"/posts",iosIcon:f.p,mdIcon:f.q},{title:"Weact",url:"/weact",iosIcon:f.b,mdIcon:f.c},{title:"Trash",url:"/page/Trash",iosIcon:f.B,mdIcon:f.C},{title:"Spam",url:"/page/Spam",iosIcon:f.D,mdIcon:f.E}]),j=["Family","Friends","Notes","Work","Travel","Reminders"],v=function(){var e=Object(d.f)();return a.a.createElement(m.r,{contentId:"main",type:"overlay"},a.a.createElement(m.g,null,a.a.createElement(m.p,{id:"inbox-list"},a.a.createElement(m.q,null,"WeFresh"),a.a.createElement(m.u,null,"Hello"),E.map((function(t,n){return a.a.createElement(m.t,{key:n,autoHide:!1},a.a.createElement(m.k,{className:e.pathname===t.url?"selected":"",routerLink:t.url,routerDirection:"none",lines:"none",detail:!1},a.a.createElement(m.j,{slot:"start",ios:t.iosIcon,md:t.mdIcon}),a.a.createElement(m.o,null,t.title)))}))),a.a.createElement(m.p,{id:"labels-list"},a.a.createElement(m.q,null,"Labels"),j.map((function(e,t){return a.a.createElement(m.k,{lines:"none",key:t},a.a.createElement(m.j,{slot:"start",icon:f.i}),a.a.createElement(m.o,null,e))})))))},h=(n(85),{latitude:0,longitude:0,timestamp:Date.now()}),b=n(80),y={user:null,posts:[]},O=function(e,t){switch(t.type){case"SET_DATA":return Object(i.a)(Object(i.a)({},e),{},{user:t.user,posts:t.posts});case"ADD_POST":return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(b.a)(e.posts),[t.post])});case"UPDATE_POST":return Object(i.a)(Object(i.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.post.id?t.post:e}))});case"DELETE_POST":return Object(i.a)(Object(i.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});default:throw new Error}},g=Object(r.createContext)(h),w=Object(r.createContext)({state:y,dispatch:function(){return null}}),x=n(105),k=n(193),_=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),"cordova_not_available"!==e.t0){e.next=15;break}if(!(t=localStorage.getItem("weef-id"))){e.next=12;break}return e.abrupt("return",t);case 12:return n="ls-".concat(Object(k.a)()),localStorage.setItem("weef-id",n),e.abrupt("return",n);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:return t=e.sent,e.next=6,fetch("/api/sessions",{method:"POST",credentials:"include",body:JSON.stringify({device_id:t}),headers:{"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){return fetch("/api/posts",{method:"POST",credentials:"include",body:JSON.stringify(Object(i.a)({},e)),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw e}))},D=function(e){return fetch("/api/posts/${post.id}",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(i.a)({},e))}).then((function(e){if(e.ok)return e.json();throw e}))},S=function(e){var t=e.post,n=e.dispatch,c=Object(r.useRef)(null),o=function(){var e=Object(u.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/posts/${post.id}",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw e}));case 3:n({type:"DELETE_POST",id:t.id}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.prev=9,null===(r=c.current)||void 0===r||r.close(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(s.a.mark((function e(){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(Object(i.a)(Object(i.a)({},t),{},{is_active:!t.is_active}));case 3:r=e.sent,n({type:"UPDATE_POST",post:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,null===(a=c.current)||void 0===a||a.close(),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(m.n,{ref:c},a.a.createElement(m.k,null,a.a.createElement(m.o,null,t.text),a.a.createElement("p",null,t.emotion_id),a.a.createElement("p",null,t.is_active?"active":"not active")),a.a.createElement(m.m,{side:"end"},a.a.createElement(m.l,{color:"secondary",onClick:l},"Disable"),a.a.createElement(m.l,{onClick:o,color:"danger"},"Delete")))},P=function(){var e=Object(r.useContext)(w),t=e.state,n=e.dispatch;return a.a.createElement(m.v,null,a.a.createElement(m.i,null,a.a.createElement(m.D,null,a.a.createElement(m.d,{slot:"start"},a.a.createElement(m.s,null)),a.a.createElement(m.C,null,"Posts"),a.a.createElement(m.d,{slot:"primary"},a.a.createElement(m.c,{color:"secondary",routerLink:"/posts/new"},a.a.createElement(m.j,{slot:"icon-only",icon:f.a}))))),a.a.createElement(m.g,{fullscreen:!0},a.a.createElement(m.i,{collapse:"condense"},a.a.createElement(m.D,null,a.a.createElement(m.C,{size:"large"},"Posts"))),a.a.createElement(m.p,{lines:"full"},t.posts.map((function(e){return a.a.createElement(S,{post:e,key:e.id,dispatch:n})})))))},I=function(){var e,t=Object(r.useContext)(w).state;return a.a.createElement(m.v,null,a.a.createElement(m.i,null,a.a.createElement(m.D,null,a.a.createElement(m.d,{slot:"start"},a.a.createElement(m.s,null)),a.a.createElement(m.C,null,"User"))),a.a.createElement(m.g,{fullscreen:!0},a.a.createElement(m.i,{collapse:"condense"},a.a.createElement(m.D,null,a.a.createElement(m.C,{size:"large"},"User"))),a.a.createElement(m.e,null,a.a.createElement(m.f,null,a.a.createElement("p",null,"User id: ",null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.name)))))},N=function(){var e=Object(d.e)(),t=e.action,n=e.push,c=e.goBack,o=Object(r.useContext)(g),l=Object(r.useContext)(w).dispatch,f={text:"",emotion_id:null},E=Object(r.useState)(f),j=Object(p.a)(E,2),v=j[0],h=j[1],b=function(){var e=Object(u.a)(s.a.mark((function e(r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,T(Object(i.a)(Object(i.a)({},v),{},{latitude:null===o||void 0===o?void 0:o.latitude,longitude:null===o||void 0===o?void 0:o.longitude}));case 3:a=e.sent,l({type:"ADD_POST",post:a}),h(f),"PUSH"===t?c():n("/posts");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(m.v,null,a.a.createElement(m.i,null,a.a.createElement(m.D,null,a.a.createElement(m.d,{slot:"start"},"PUSH"===t?a.a.createElement(m.b,{defaultHref:"/"}):a.a.createElement(m.s,null)),a.a.createElement(m.C,null,"New Post"))),a.a.createElement(m.g,{fullscreen:!0},a.a.createElement(m.i,{collapse:"condense"},a.a.createElement(m.D,null,a.a.createElement(m.C,{size:"large"},"New Post"))),a.a.createElement("form",{onSubmit:b},a.a.createElement(m.p,{lines:"full"},a.a.createElement(m.q,null,a.a.createElement(m.o,null,"Text")),a.a.createElement(m.k,null,a.a.createElement(m.B,{value:v.text,inputMode:"text",placeholder:"Enter Text",autoGrow:!0,required:!0,rows:3,onIonChange:function(e){return h(Object(i.a)(Object(i.a)({},v),{},{text:e.detail.value||""}))}})),a.a.createElement(m.x,{value:v.emotion_id,onIonChange:function(e){return h(Object(i.a)(Object(i.a)({},v),{},{emotion_id:e.detail.value}))}},a.a.createElement(m.q,null,a.a.createElement(m.o,null,"Emotion")),a.a.createElement(m.k,null,a.a.createElement(m.o,null,"Happy"),a.a.createElement(m.w,{slot:"end",value:1})),a.a.createElement(m.k,null,a.a.createElement(m.o,null,"Amused"),a.a.createElement(m.w,{slot:"end",value:2})),a.a.createElement(m.k,null,a.a.createElement(m.o,null,"Angry"),a.a.createElement(m.w,{slot:"end",value:3})),a.a.createElement(m.k,null,a.a.createElement(m.o,null,"Meh"),a.a.createElement(m.w,{slot:"end",value:4})))),a.a.createElement(m.c,{type:"submit",expand:"full",fill:"outline"},"Create Post"))))},U=n(107),A=n(191),L=n(194),H=n(192),W=(n(127),function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(null),l=Object(p.a)(o,2),d=l[0],E=l[1],j=Object(r.useState)(null),v=Object(p.a)(j,2),h=v[0],b=v[1],y=Object(r.useContext)(g),O=Object(r.useRef)(null),w=Object(r.useRef)(null),x=Object(A.a)(0),k=Object(L.a)(),_=function(e){var t=Object(U.a)(e),n=t[0],r=t.slice(1);E(n),c(r),r.length||C().then((function(e){return c(e)}))},C=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),e.next=4,fetch("/api/posts",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw e}));case 4:return t=e.sent,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),b("Something went wrong \ud83d\ude1e");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e;null!==O.current&&console.log(null===O||void 0===O||null===(e=O.current)||void 0===e?void 0:e.getBoundingClientRect());C().then((function(e){return e&&_(e)}))}),[]),Object(r.useEffect)((function(){var e=x.onChange((function(){w.current}));return function(){return e()}}));var T=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=11;break}return r={post_id:d.id,direction:t,latitude:y.latitude,longitude:y.longitude},e.prev=2,e.next=5,a=r,fetch("/api/weactions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(i.a)({},a))}).then((function(e){if(e.ok)return e.json();throw e}));case 5:_(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(h);case 11:case"end":return e.stop()}var a}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,c,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.offset.x,a=n.velocity.x,c=n.offset.y,o=n.velocity.y,l=null,c<-100||o<-100?(console.log("swipe up"),u={y:-1e3},l="up"):c>100||o>100?(console.log("swipe down"),u={y:1e3},l="down"):r<-100||a<-100?(console.log("swipe right"),u={x:-1e3},l="right"):(r>100||a>100)&&(console.log("swipe left"),u={x:1e3},l="left"),!l){e.next=19;break}return e.prev=7,e.next=10,T(l);case 10:return e.next=12,k.start(Object(i.a)(Object(i.a)({},u),{},{transition:{duration:.5},opacity:0}));case 12:return e.next=14,k.start({opacity:1,x:0,y:0});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t,n){return e.apply(this,arguments)}}();return h?a.a.createElement("p",null,h):a.a.createElement(m.v,null,a.a.createElement(m.i,null,a.a.createElement(m.D,null,a.a.createElement(m.d,{slot:"start"},a.a.createElement(m.s,null)),a.a.createElement(m.C,null,"Weact"))),a.a.createElement(m.g,{fullscreen:!0,ref:O,scrollY:!1},a.a.createElement(m.i,{collapse:"condense"},a.a.createElement(m.D,null,a.a.createElement(m.C,{size:"large"},"Weact"))),a.a.createElement(H.a.div,{ref:w,drag:!0,dragConstraints:{top:0,left:0,right:0,bottom:0},dragElastic:1,whileTap:{scale:1.1},style:{x:x},onDragEnd:D,animate:k,className:"weact-height"},a.a.createElement(m.e,{className:"full-height"},a.a.createElement(m.f,null,n.length&&a.a.createElement("p",null,n[0].text))))),a.a.createElement(m.h,null,a.a.createElement(m.D,null,a.a.createElement(m.d,null,a.a.createElement(m.c,{onClick:function(){return T("down")}},a.a.createElement(m.j,{slot:"icon-only",icon:f.f})),a.a.createElement(m.c,{onClick:function(){return T("left")}},a.a.createElement(m.j,{slot:"icon-only",icon:f.d})),a.a.createElement(m.c,{onClick:function(){return T("right")}},a.a.createElement(m.j,{slot:"icon-only",icon:f.g})),a.a.createElement(m.c,{onClick:function(){return T("up")}},a.a.createElement(m.j,{slot:"icon-only",icon:f.h}))))))}),q=n(108),B=n(109),J={coords:{latitude:0,longitude:0},timestamp:0},R=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.getCurrentPosition();case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),"User denied Geolocation"===(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&console.log("User denied Geolocation"),e.abrupt("return",J);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),z=(n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),function(){var e=Object(r.useReducer)(O,y),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(h),l=Object(p.a)(o,2),f=l[0],E=l[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/sessions",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json();if(console.log(e),401===e.status)return C();throw e})).catch((function(e){console.log(e)}));case 3:t=e.sent,c(Object(i.a)({type:"SET_DATA"},t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,E({latitude:t.coords.latitude,longitude:t.coords.longitude,timestamp:t.timestamp});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),n.user?a.a.createElement(m.a,null,a.a.createElement(w.Provider,{value:{state:n,dispatch:c}},a.a.createElement(g.Provider,{value:f},a.a.createElement(q.a,null,a.a.createElement(m.A,{contentId:"main"},a.a.createElement(v,null),a.a.createElement(m.z,{id:"main"},a.a.createElement(d.b,{path:"/posts/new",component:N,exact:!0}),a.a.createElement(d.b,{path:"/posts",component:P,exact:!0}),a.a.createElement(d.b,{path:"/weact",component:W,exact:!0}),a.a.createElement(d.b,{path:"/user",component:I,exact:!0}),a.a.createElement(d.a,{from:"/",to:"/posts",exact:!0}))))))):a.a.createElement("div",null,"nope")});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,n){}},[[113,3,4]]]);
//# sourceMappingURL=main.a2b211d3.chunk.js.map